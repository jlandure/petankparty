<html>
  <head>
    <title>Application Google Maps : Coordonnées d'un point</title>

    <script src="http://maps.google.com/maps?file=api&v=2&key=
    ABQIAAAAFw0lDRKsdCra15LPvIxvehS3Kl_ZRrzIrsFqDz8GBXIeW1O52xQh3P31Xg2eTvqFRAyuOMY4dQrRQw"
    type="text/javascript"></script>

    <script type="text/javascript">//<![CDATA[
      function load()
        {
        if (GBrowserIsCompatible())
          {
          var mapform = new GMap2(document.getElementById("mapform"));
          geocoder = new GClientGeocoder(); //Création d'une instance "geocoder"
          if (geocoder)
            {
            // L'adresse est ici déclarée mais vous pouvez par l'intermédiaire d'une
            // variable PHP rendre l'adresse dynamique
            // La même adresse sera copiée dans la fonction "alert()"
            // "geocoder.getLatLng" va convertir en coordonnées l'adresse
            //geocoder.getLatLng('Avenue de la Loire, 44470 , Carquefou, FR', function(point)
            geocoder.getLatLng('Rue du Toulhouet , Lorient, FR', function(point)
              {
              if (!point) // L'adresse n'est pas connue par Google Maps
                {
                mapform.setCenter(new GLatLng(50.0, 4.0), 7);
                alert('Lieu non trouvé');
                }
              else // L'adresse est connue par Google Maps
                {
                mapform.setCenter(point, 13); // Centrage de la carte
                // Instantiation de l'objet "markerD" déplaçable
                var markerD = new GMarker(point, {draggable: true});
                mapform.addOverlay(markerD); // Affichage du marqueur
                // Affichage des coordonnées dans la fenêtre sous la carte
                document.SearchCenter.CoordGM.value = point.toString();
                // "Écoute" d'un déplacement du marqueur, si c'est le cas
                // modification des coordonnées dans la fenêtre sous la carte
                GEvent.addListener(markerD, "drag", function()
                  {
                  document.getElementById("location").value=markerD.getPoint().toUrlValue();
                  });
                }
              });
            }
          mapform.addControl(new GMapTypeControl());
          mapform.addControl(new GLargeMapControl());
          mapform.enableScrollWheelZoom();
          mapform.addControl(new GOverviewMapControl());
          mapform.addControl(new GScaleControl());
          mapform.addOverlay(markerD);
          markerD.enableDragging();
          }
        }
    //]]></script>
  </head>

  <body onload="load()" onunload="GUnload()">
    <div id="mapform" style="width: 500px; height: 300px"></div>
    <form method="GET" name="SearchCenter">
      <input type="text" id="location" name="CoordGM" readonly><br>
    </form>
  </body>
</html>